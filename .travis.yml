sudo: required
language: generic
services:
- docker
env:
  matrix:
  - HHVM_VERSION=4.56-latest
  global:
  - secure: LoQU9i44IKyQGx7+i/d1do+H/CLvC3a8UO668E/AgWG8z+1gnCadDbUfFXHDV20cXN+7wFZXs+qr9BfI/iiiQmG2uHs+iYo6svujwjPqhbGlIFkUkPYQHW1dQg8f0Bj1q+OgOB7zNO6CJj6njXgciOAXZizhIdhfIIqMGQNfLlJlnk2hzrQmQVc4Pqce1eV8tsUjoWcz3vtjCId8xcS9kSDzQFbsRv3pule23WseGqbPuoWVFazHU/BGSIF/QnO7OTTw8p9/fItmoNBf6zGHZqHBklEfRRWgg8iV064u92vp1aKeJHpYhOBbOBe7bzjXsMAtjUgUEAXf58A0clLDo+l6uxtsHKAxalCv4ulLrVLTraCK5HItrA3fnB1AGofJUDKRe6y2AMaqhGm0vmEsKF0ooTCMQ3MvatRm5o7UtrVwOabGie6BEctnLXDbIgcBKOZk7led3Mh4UW68s/ciiE2cgCIkNgxDoNytoZozQsXPcA87VqUkypX2RacLrH/JIBy+vZAsJvUCnsrDzsDuMqeWuNw27VKL3CjucvzEevIC3nV+ZfC0e4K6UJetb6kPRIVsfS2E6JIg/SKd2aIOmTxlD28XbDiMiQRh3lLkhuegTu/QVPt9bgvSnvDyOsKoAbmZRJHDhePmyzcavKPtdP02xF/2BPTu9Y/9czIQnxA=
  - secure: KjiRypAiRl0tvxAq66fneIfHY5lZI5EVDyDf/m2GSrsoMIMFDNeSCkvWuq5UzJjk2NWvXzSgoZZHod1yIRl+KiVqRqmbF11QnZffd8TfDAY8qf/zrinnP+Jw/Vzy9g5xlMNM+ncTijaWXYlqkEYSKGJxTaARymHbqSTtS+G14HyJ6yPRDPJkr+Q2Xvw0mQnNPQshqzISb2emdEpO/Fowu2ti8DD7jaFYakPBV1gndcW1TFLYMFE1R8qrWcPP+ntcqWAQA0nN+xS/ugH/cDxq+RfePz83egtph43l3S3lzSP2CVCEhIAiMvkqN+IsHKoIXZ88L4MI2pIyA4Wt1iVmITSjD9RDg3f6OJ107uo/htkGRKulWs3XPzabMftBp8ATygpUwb2yr3rRUDV+R8m56gaiDGi0zQoxSpPo/bCl6T6jhS6of86ow6OVkdak0F+83PFAkmS+C+ekJP/0XQrnyRY9+iWKcIzZbVMRD1gpavJBD2gCrXgwtORumHkTzFYEF2vqjvt/BqxvwnwXWry5E5lEIk79CmENDulWfBBMBa/LdIkd0hv7Mr8t76bu+lj7AP6UEJIB+9odYZnaKrKpOkC4frdaOJZDzK2ArBhIKNUbL4xP34xBnvjuWyFoqTMMLBxxOjW8uVlX74SMbfq6Gg2o0A9xY+l1Vb9sNqbcKjY=
  - secure: sAwaQ/0yzya/kCrHJY1WIRzKnt2pyOuXx4eVyEB1znckj0ErdU+cR8gknh96suNVljM62M7cHWsvhKiDEbWy5PSeRceAygWgkLzrwLfksre9JgSTn8sHVCMvTK2Ryj116zBZAteEVBas/TMw3MtJhwRQ59tV8uL4Q0KhVdxEZtUNwaj27kEZ/Xye5jR9Bd5MeB+hm5ZW9/qx6nyVkuSSW+5RHe6hbT7a6oPpDs4+Icv+XCdkZoT/75koSfEzxpPV0ec07QOXPXLL5XhhnQYDuY1GjURp/0t4QIBuIr406Z4x2XjzfaPI6icp/01TRZgzRZT/SZVAI09/NgsGJ3ZpzhrklCnrOKktb4KsUvHucldNbAf5TNRT3JP4HGFHJsNTX75W9aDWVAARFrn0B/IEQPXhPg+VGCJOegI9Y6k+2gSNVfqToSwruUqI07BWj7Arf25GZAnlbFQGdHG6ask+rP4+XiDncj+gB+5ISsLjBdMri7tpWqwGQ10dbyrtZu1xgp0kz97JOPPcfhhgUuNW+mT0blkStAL+pxykWkPtsHQgiRqUexj1qoK4QEtRJlLzXrLGAh+NSs1My3Hpk5v2JalnUZzWBvJqnF6dJuZsiaqUNFLga+SluQLngK/NRBWcNXW/E5C6o+p8MIRJgypE0mUrnxzYSFLEShCuqn8qkEE=
  - secure: WXf08G5KtzKJSu74XAGkv8Cg/gUx1KjQ9g9a2mvAQDjWFsd0DZBCFqBAS0/po+Ukw/MogK1rze2sEx2/7xqnDl01N6J3QumFRhWAOu1HXByFpcT9dtSdeShjQhunx9hl7u9oPkWR17z8RjEzcV5RqH/8AnItqvYA4nhhNaQ1aMpxqsZD4zPWZqBVNqLEkeedxyePV5pAiAoCTnvmNe5uXo95JQaXzTkuERnUW5d0FzW/iYhVVYIz41N4uyhOVTVx9Jqm5re9xfj48ToaEkRuu1TpgPcg56tlK5XHZnSl8YKxLN0Ms7SeZURbfRZMuUx2gpid7vo+f6kUrzefA5vgwb3BYMMkQbC2huL4PxsBg36tbWVFBf5JLux39BcwCP6e0tgq50ahTXplvULLTzkNCEHHyA2QotaV0bx/+B0XgWSFyMi0QQiD8BF7H3fGcPjcVCNOHhkqylF10TpS40EFAxP/SGhKtgj+kky8OFfZKbMFvAXrRITDzDhWW/u3/E0tCFx3J0C3YXZsoNVKjdP03+bbDVWEaob9PcSZSn3FnQzXUIF201nzZ3klDgNvdNNdymyJn5+QixGWkAtehU51m9sJe9lsWOC6Ue3llW96IUxUcKK361jZ3ZzaW4J1Ayedkq01xogJQGeW3kcCLQkfc6ob/ri6Y6JBW6t9HyHDZIg=
install:
- docker pull hhvm/hhvm:$HHVM_VERSION
- docker pull hhvm/hhvm-proxygen:$HHVM_VERSION
script:
- docker build -t hhvm/user-documentation:scratch -f .deploy/built-site.Dockerfile .
- docker run --rm -w /var/www hhvm/user-documentation:scratch hh_server --check .
- docker run --rm -w /var/www hhvm/user-documentation:scratch vendor/bin/hacktest tests/
- docker run --rm -w /var/www hhvm/user-documentation:scratch vendor/bin/hhast-lint
- docker run --rm -w /var/www hhvm/user-documentation:scratch vendor/bin/hh-codegen-verify-signatures src
deploy:
  provider: script
  script: "./.travis-deploy.sh"
  on:
    branch: master
notifications:
  slack:
    secure: p7mcZzvpD3Ku3Z/m5ktz2qUelCeZbM78bmuGM/7N3/5wd1BysfSG/ELi8hfc16e3ZBVJmnsDR7rhE4m5Lw3764zCgtk9Kx2Z8XWkolOedoPrQHIMspKYyJiNhraHTB1bfJB5VaRrjPyH/Z7krVefrfdJfI5YdnVZgmxaAfcojq+g9liDl6HhhgOFhyfNw9pSH/vs82tdYoLED7alardfVDkE2SwOKxjbJEpVApzn2jzC0XA+pyDlAU5wTSGs9WMEJIEzliWUbeuGT3ZkxJkazGFWOAHY0OXTXDfvcQJTn8aqB3Sy47lyCIsiGvR++dzAWtjCdISHXaIfcyy3oNq+NaNM0onOs6oFWRB6b8RHgkTwlJAF5LFrwqDH6xij6Cur5c5+Bpmb/jmeYG4EMCFp1ctIJJflB4SfcobcgIr00l9C8ezp5Gf2QVCEDVAewiCRshbEuIFpZ16w94SOj34f7CZX7p6WYR0JbTGFFlzS2GD/1jjx4XnTKVA6Kpr58RQUp4v/SrwlpJEE4RmmaTMfD3Qkh18MMHw8vOva3sSUzpDE+1mcsSF60fxITdGUEjKALWe0WfCBFdOIJF14w/vTDaVS9LeCdcfoUcmfr46pUWRpz8ASV3+hWVYVb3aUnGDS7Ws2l65h93e8QfWkuj9fAKmZUq4dZCEoifAUA14YSo4=
